version: '3'

services:
  overlay-server:
    container_name: overlay-server
    build: 
      context: ./overlay-server
    environment:
     - SERVERHOST=${SERVERHOST}
     - SERVERPORT=${SERVERPORT}
     - AUTHKEY=${AUTHKEY}
    ports:
     - "${SERVERPORT}:${SERVERPORT}"

  overlay-manager:
    container_name: overlay-manager
    build: 
      context: ./overlay-manager
    environment:
     - MANAGERHOST=${MANAGERHOST}
     - MANAGERPORT=${MANAGERPORT}
     - SERVERHOST=${SERVERHOST}
     - SERVERPORT=${SERVERPORT}
     - AUTHKEY=${AUTHKEY}
    ports:
     - "${MANAGERPORT}:80"

  overlay-screen:
    container_name: overlay-screen
    build: 
      context: ./overlay-screen
    ports:
     - "80:80"